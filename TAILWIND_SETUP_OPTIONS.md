# Tailwind CSS Setup Options

This document outlines different approaches for handling Tailwind CSS in the component library, particularly how utility classes are generated for consuming projects.

## Current Issue

The Button component uses Tailwind utility classes (e.g., `bg-primary`, `bg-secondary`, `bg-destructive`) that need to be generated by Tailwind CSS in the consuming project. Tailwind v4 requires scanning source files to generate these utility classes.

## Option 1: Include Source Files (Recommended) ✅

**Approach:** Include the `src` folder in the published package so Tailwind can automatically scan component files.

**Implementation:**
- Update `package.json`:
  ```json
  "files": [
    "dist",
    "src"
  ]
  ```
- Update `.npmignore` to remove `src/` exclusion (or comment it out)

**Pros:**
- ✅ Works out of the box - no configuration needed in consuming projects
- ✅ Standard approach for Tailwind-based component libraries
- ✅ Tailwind automatically scans `node_modules/@tan-ahmed/tan-ui-kit/src/**/*.{ts,tsx}`
- ✅ Only generates classes that are actually used
- ✅ Flexible - consumers can customize if needed

**Cons:**
- ❌ Source code is included in the package (larger package size)
- ❌ Source code is visible to consumers

**Status:** ✅ Implemented - see package.json and .npmignore

**Note:** Tailwind v4 requires the `@source` directive in the consuming project's CSS to scan node_modules. This is a Tailwind v4 requirement, not a limitation of this approach.

---

## Option 2: Pre-generate All Utility Classes ✅

**Approach:** Build a complete CSS file with all possible utility classes pre-generated.

**Implementation:**
- Separate build step (`build:css`) generates CSS with all utility classes
- Uses `src/build-styles.tsx` which renders all component variants
- CSS is pre-generated and included in `dist/tan-ui-kit.css`
- Consumers just import the CSS - no Tailwind scanning needed

**Pros:**
- ✅ No source files needed in package
- ✅ Works without Tailwind configuration (no `@source` directive needed)
- ✅ Works out of the box - just import the CSS
- ✅ Smaller source footprint (no src/ in package)

**Cons:**
- ❌ CSS file includes all used classes (but optimized - only what's needed)
- ❌ Need to regenerate CSS when adding new components/variants
- ❌ Slightly larger CSS than JIT (but still reasonable ~11KB)

**Status:** ✅ Implemented - see `vite.css.config.ts` and `scripts/build-css.js`

---

## Option 3: Require Consumer Configuration

**Approach:** Document that consumers must configure Tailwind to scan the package.

**Implementation:**
- Keep source files excluded
- Update README with setup instructions
- Consumers add to their Tailwind config:
  ```js
  // vite.config.ts with @tailwindcss/vite
  tailwindcss({
    content: [
      './src/**/*.{js,ts,jsx,tsx}',
      './node_modules/@tan-ahmed/tan-ui-kit/dist/**/*.{js,ts,jsx,tsx}',
    ],
  })
  ```

**Pros:**
- ✅ No source files in package
- ✅ Smaller package size
- ✅ More control for consumers

**Cons:**
- ❌ Requires manual configuration in every project
- ❌ Not "just works" - adds friction
- ❌ Scanning `dist` files may not work well (classes are in JS, not easily scannable)

**Status:** Not recommended - goes against "just works" principle

---

## Option 4: Hybrid Approach

**Approach:** Include source files but only the necessary ones (components and utilities, exclude tests, configs).

**Implementation:**
- Include `src/components/` and `src/lib/` in package
- Exclude `src/App.tsx`, `src/main.tsx`, test files, etc.
- Use `.npmignore` to be selective:
  ```
  # Include only what's needed
  !src/components/
  !src/lib/
  !src/styles.css
  !src/index.ts
  ```

**Pros:**
- ✅ Smaller than including all of `src`
- ✅ Still works out of the box
- ✅ Hides development files

**Cons:**
- ❌ More complex `.npmignore` configuration
- ❌ Need to maintain the exclusion list

**Status:** Not implemented

---

## Recommendation

**Option 1 (Include Source Files)** is recommended because:
1. It's the standard approach for Tailwind component libraries
2. Works out of the box without configuration
3. The package size increase is minimal (source files are small)
4. Most open-source packages include source code anyway

## Implementation Notes

To implement Option 1:

1. **Update `package.json`:**
   ```json
   "files": [
     "dist",
     "src"
   ]
   ```

2. **Update `.npmignore`:**
   - Remove or comment out the `src/` line
   - Keep test file exclusions (`*.test.ts`, `*.spec.ts`)
   - Keep config file exclusions

3. **Test:**
   - Publish new version
   - Install in a test project
   - Verify Tailwind automatically scans and generates classes
   - Verify Button styles work without additional configuration

## References

- Tailwind CSS v4 documentation: https://tailwindcss.com/docs
- Similar libraries: shadcn/ui components include source files
- Package size considerations: Source files are typically small compared to `node_modules`
