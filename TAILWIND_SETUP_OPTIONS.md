# Tailwind CSS Setup Options

This document outlines different approaches for handling Tailwind CSS in the component library, particularly how utility classes are generated for consuming projects.

## Current Issue

The Button component uses Tailwind utility classes (e.g., `bg-primary`, `bg-secondary`, `bg-destructive`) that need to be generated by Tailwind CSS in the consuming project. Tailwind v4 requires scanning source files to generate these utility classes.

## Option 1: Include Source Files

**Approach:** Include the `src` folder in the published package so Tailwind can automatically scan component files.

**Implementation:**
- Update `package.json`:
  ```json
  "files": [
    "dist",
    "src"
  ]
  ```
- Update `.npmignore` to remove `src/` exclusion (or comment it out)

**Pros:**
- ✅ Works out of the box - no configuration needed in consuming projects
- ✅ Standard approach for Tailwind-based component libraries
- ✅ Tailwind automatically scans `node_modules/@tan-ahmed/tan-ui-kit/src/**/*.{ts,tsx}`
- ✅ Only generates classes that are actually used
- ✅ Flexible - consumers can customize if needed

**Cons:**
- ❌ Source code is included in the package (larger package size)
- ❌ Source code is visible to consumers
- ❌ Requires `@source` directive in consuming project's CSS (Tailwind v4 requirement)

**Status:** Not currently implemented (we use Option 2 instead)

**Note:** Tailwind v4 requires the `@source` directive in the consuming project's CSS to scan node_modules. This adds friction for consumers.

---

## Option 2: Pre-generate All Utility Classes ✅

**Approach:** Build a complete CSS file with all possible utility classes pre-generated.

**Implementation:**
- Separate build step (`build:css`) generates CSS with all utility classes
- Uses `src/build-styles.tsx` which renders all component variants
- CSS is pre-generated and included in `dist/tan-ui-kit.css`
- Consumers just import the CSS - no Tailwind scanning needed

**Pros:**
- ✅ No source files needed in package
- ✅ Works without Tailwind configuration (no `@source` directive needed)
- ✅ Works out of the box - just import the CSS
- ✅ Smaller source footprint (no src/ in package)

**Cons:**
- ❌ CSS file includes all used classes (but optimized - only what's needed)
- ❌ Need to regenerate CSS when adding new components/variants
- ❌ Slightly larger CSS than JIT (but still reasonable ~11KB)

**Status:** ✅ Implemented - see `vite.css.config.ts` and `scripts/build-css.js`

---

## Option 3: Require Consumer Configuration

**Approach:** Document that consumers must configure Tailwind to scan the package.

**Implementation:**
- Keep source files excluded
- Update README with setup instructions
- Consumers add to their Tailwind config:
  ```js
  // vite.config.ts with @tailwindcss/vite
  tailwindcss({
    content: [
      './src/**/*.{js,ts,jsx,tsx}',
      './node_modules/@tan-ahmed/tan-ui-kit/dist/**/*.{js,ts,jsx,tsx}',
    ],
  })
  ```

**Pros:**
- ✅ No source files in package
- ✅ Smaller package size
- ✅ More control for consumers

**Cons:**
- ❌ Requires manual configuration in every project
- ❌ Not "just works" - adds friction
- ❌ Scanning `dist` files may not work well (classes are in JS, not easily scannable)

**Status:** Not recommended - goes against "just works" principle

---

## Option 4: Hybrid Approach

**Approach:** Include source files but only the necessary ones (components and utilities, exclude tests, configs).

**Implementation:**
- Include `src/components/` and `src/lib/` in package
- Exclude `src/App.tsx`, `src/main.tsx`, test files, etc.
- Use `.npmignore` to be selective:
  ```
  # Include only what's needed
  !src/components/
  !src/lib/
  !src/styles.css
  !src/index.ts
  ```

**Pros:**
- ✅ Smaller than including all of `src`
- ✅ Still works out of the box
- ✅ Hides development files

**Cons:**
- ❌ More complex `.npmignore` configuration
- ❌ Need to maintain the exclusion list

**Status:** Not implemented

---

## Recommendation

**Option 2 (Pre-generate All Utility Classes)** is currently implemented because:
1. ✅ Works out of the box - no `@source` directive needed
2. ✅ No source files in package - cleaner distribution
3. ✅ Better developer experience - just import CSS and it works
4. ✅ Works with Next.js, Vite, and other frameworks without extra config
5. ✅ CSS file is optimized (~11KB) and only includes used classes

## Current Implementation

We're using **Option 2**. The implementation includes:

1. **Separate CSS build** (`vite.css.config.ts`):
   - Builds all component variants to generate CSS
   - Uses `@tailwindcss/vite` plugin

2. **Build script** (`scripts/build-css.js`):
   - Copies generated CSS to `dist/tan-ui-kit.css`
   - Runs before main library build

3. **Component variant renderer** (`src/build-styles.tsx`):
   - Renders all component variants
   - Ensures all utility classes are generated

4. **Package configuration**:
   - Only `dist/` folder is included
   - CSS is exported via `./styles` subpath

**To add new components/variants:**
- Update `src/build-styles.tsx` to include new variants
- Rebuild CSS: `npm run build:css`

## References

- Tailwind CSS v4 documentation: https://tailwindcss.com/docs
- Similar libraries: shadcn/ui components include source files
- Package size considerations: Source files are typically small compared to `node_modules`
